(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{424:function(n,a,e){"use strict";e.r(a);var t=e(2),r=Object(t.a)({},(function(){var n=this,a=n._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[a("h1",{attrs:{id:"ajax"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ajax"}},[n._v("#")]),n._v(" ajax")]),n._v(" "),a("h2",{attrs:{id:"介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[n._v("#")]),n._v(" 介绍")]),n._v(" "),a("p",[n._v("ajax:异步程序")]),n._v(" "),a("h3",{attrs:{id:"请求状态码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求状态码"}},[n._v("#")]),n._v(" 请求状态码:")]),n._v(" "),a("ul",[a("li",[n._v("​    0: 请求未初始化")]),n._v(" "),a("li",[n._v("​    1: 服务器连接已建立")]),n._v(" "),a("li",[n._v("​    2: 请求已接收")]),n._v(" "),a("li",[n._v("​    3: 请求处理中")]),n._v(" "),a("li",[n._v("​    4: 请求已完成，且响应已就绪")])]),n._v(" "),a("h3",{attrs:{id:"协议状态码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#协议状态码"}},[n._v("#")]),n._v(" 协议状态码:")]),n._v(" "),a("ul",[a("li",[n._v("​    1XX(临时相应）")]),n._v(" "),a("li",[n._v("​    2XX(成功)")]),n._v(" "),a("li",[n._v("​    200(成功）请求成功")]),n._v(" "),a("li",[n._v("​    3xx（重定向）")]),n._v(" "),a("li",[n._v("​    4xx（请求错误）")]),n._v(" "),a("li",[n._v("​     400（错误请求）： 服务器不理解请求的语法；")]),n._v(" "),a("li",[n._v("​     404（未找到指定文件） 路径问题")]),n._v(" "),a("li",[n._v("​    5XX（服务器错误）")]),n._v(" "),a("li",[n._v("​     500（服务器内部错误）： 服务器遇到错误，无法完成请求；")])]),n._v(" "),a("p",[n._v("​    // ajax: js内置对象  前后端交互方式")]),n._v(" "),a("h2",{attrs:{id:"ajax-get请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ajax-get请求"}},[n._v("#")]),n._v(" ajax  get请求")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('\n\n     btn.onclick = function () {\n\n       // 1.创建ajax对象\n\n       var xhr = new XMLHttpRequest();\n\n       console.log(xhr.readyState)\n\n       // 2.发送请求 open(method,url)\n\n       xhr.open("get", "links/2.get.php?username=ahua&age=20")\n\n       console.log(xhr.readyState)\n\n      // 3.发送数据\n\n       xhr.send()\n\n       console.log(xhr.readyState)\n\n       // 4.监听响应结果\n\n       xhr.onreadystatechange = function () {\n\n         // 1.请求状态码  2.协议状态码\n\n        if(xhr.readyState == 4 && xhr.status == 200){\n\n          res.innerHTML = xhr.responseText\n\n    }\n\n  }\n')])])]),a("h2",{attrs:{id:"ajax-post请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ajax-post请求"}},[n._v("#")]),n._v(" ajax post请求")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v(' btn.onclick = function () {\n            // 1.创建ajax对象\n            var xhr = new XMLHttpRequest();\n           \n            // 2.发送请求 open(method,url)\n            xhr.open("post", "links/2.post.php")\n            \n            // post 请求  设置请求头\n            xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");\n            // 3.发送数据\n            xhr.send("username=ahua&age=20")\n          \n            // 4.监听响应结果\n            xhr.onreadystatechange = function () {\n                // 1.请求状态码  2.协议状态码\n                if(xhr.readyState == 4 && xhr.status == 200){\n                    // responseText response 接口中的数据\n                    res.innerHTML = xhr.response\n                }else{\n                    console.log("做请求失败的操作")\n                }\n            }\n\n\n        }\n\n')])])]),a("h3",{attrs:{id:"封装ajax"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#封装ajax"}},[n._v("#")]),n._v(" 封装ajax")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('  // ajax 封装\n        function ajax(method, url, obj, callback) {\n            // username=awei&age=20\n            // 处理对象格式数据 变成字符串\n            var arr = []\n            for (var key in obj) {\n                arr.push(key + "=" + obj[key])\n            }\n            var data = arr.join("&");\n            // 1.创建ajax对象\n            var xhr = null;\n            // 判断高低版本浏览器\n            if (window.XMLHttpRequest) {\n                xhr = new XMLHttpRequest();//IE7+, Firefox, Chrome, Opera, Safari\n            } else {// code for IE6, IE5\n                xhr = new ActiveXObject("Microsoft.XMLHTTP");\n            }\n            // 判断请求方式 是否为get请求\n            url = method == "get" ? url + "?" + data : url;\n\n            //2.发送请求 \n            xhr.open(method, url)\n\n            // 3.发送数据\n            if (method == "get") {\n                // 说明是get请求  无需发送数据\n                xhr.send(null)\n            } else {\n                // 设置请求头\n                xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");\n                // post请求 需发送数据\n                xhr.send(data)\n            }\n            // 4.监听响应结果\n            xhr.onreadystatechange = function () {\n                // 判断 是否请求成功\n                if (xhr.readyState == 4 && xhr.status == 200) {\n                    callback && callback(xhr.response)\n                }\n            }\n\n\n        }\n')])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v(' btn.onclick = function () {\n            // 请求方式\n            var method = "post";\n            // 请求接口\n            var url = "links/2.post.php"\n            // 参数\n            var obj = {\n                username: inp.value,\n                age: 20\n            }\n\n\n            // 理想使用方法\n            // ajax("post", "links/2.post.php", obj, function (data) {\n            //     console.log(data)\n            // })\n\n            ajax(\n                method,\n                url,\n                obj,\n                function (data) {\n                    console.log(data)\n                })\n        }\n')])])])])}),[],!1,null,null,null);a.default=r.exports}}]);